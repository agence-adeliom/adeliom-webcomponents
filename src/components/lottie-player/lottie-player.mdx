import { Title, Subtitle, Meta, ArgTypes, Primary, Description, Stories } from '@storybook/blocks';
import * as LottiePlayerStories from './lottie-player.stories';
import { TagNames } from '@awc-storybook/blocks/TagNames.jsx';
import { Summary } from '@awc-storybook/blocks/Summary.jsx';
import { Importing } from '@awc-storybook/blocks/Importing.jsx';

<Meta of={LottiePlayerStories} />

<Title of={LottiePlayerStories} />
<TagNames of={LottiePlayerStories} />
<Summary of={LottiePlayerStories} />
<Subtitle of={LottiePlayerStories} />
<Description of={LottiePlayerStories} />

<Primary of={LottiePlayerStories} />

<Stories of={LottiePlayerStories} includePrimary={false} title={'Examples'} />

### Convert to dotLottie

If you have a Lottie JSON animation and want to convert it to a dotLottie – to leverage compression, combine multiple animations in one file and keep your file library tidy with a discrete file extension – you can do so with the `convert()` method. This will trigger a download in the browser. If you have `controls` set to visible there's a convert button visible for JSON files.

### Combine animations

If you want to combine multiple animations in one single dotLottie file you can use the `addAnimation` method. This will trigger a download in the browser. The source files can be either dotLottie or JSON, and the output file will will always be a dotLottie.

```javascript
const lottiePlayer = document.querySelector('awc-lottie-player')
(async () => {
  await lottiePlayer?.addAnimation([
    { id: 'animation_1', url: '/url/to/animation_1.lottie' },
    { id: 'animation_2', url: '/url/to/animation_2.json', direction: -1, speed: 2 }
  ])
}())
```

The new file wil automatically load the first animation when initialized. You can toggle between animations with the `next()` and `prev()` methods, or you can use the navigation buttons in the controls.

If you add `multiAnimationSettings` to the markup you can control the playback of multiple animations. In the example below the first animation will play once, and then the next animation will loop:

```xml
<awc-lottie-player
  src="/path/to/combined-animations.lottie"
  multiAnimationSettings='[{"autplay": true}, {"autoplay": true, "loop": true}]'
>
</awc-lottie-player>
```

## Importing

If you’re using the autoloader or the traditional loader, you can ignore this section.
Otherwise, feel free to use any of the following snippets to [cherry pick](/?path=/docs/getting-started-installation--documentation#cherry-picking) this component.

<Importing />

## API

### Methods

| Method                                   | Function                                                                                                  |
| ---------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| `addAnimation(config: Config[]) => void` | Add animation. Triggers download of new dotLottie file.                                                   |
| `convert() => void`                      | If the current animation is in JSON format – convert it to dotLottie. Triggers a download in the browser. |
| `destroy() => void`                      | Nullify animation and remove element from the DOM.                                                        |
| `getLottie() => AnimationItem \| null`   | Returns the lottie-web instance used in the component                                                     |
| `load(src: string) => void`              | Load animation by URL or JSON object                                                                      |
| `next() => void`                         | Next animation (if several in file)                                                                       |
| `pause() => void`                        | Pause                                                                                                     |
| `prev() => void`                         | Previous animation (if several in file)                                                                   |
| `play() => void`                         | Play                                                                                                      |
| `reload() => void`                       | Reload                                                                                                    |
| `seek(value: number \| string) => void`  | Go to frame. Can be a number or a percentage string (e. g. 50%).                                          |
| `setCount(value: number) => void`        | Dynamically set number of loops                                                                           |
| `setDirection(value: 1 \| -1) => void`   | Set Direction                                                                                             |
| `setLooping(value: boolean) => void`     | Set Looping                                                                                               |
| `setSpeed(value?: number) => void`       | Set Speed                                                                                                 |
| `setSubframe(value: boolean) => void`    | Set subframe                                                                                              |
| `snapshot() => string`                   | Snapshot the current frame as SVG. Triggers a download in the browser.                                    |
| `stop() => void`                         | Stop                                                                                                      |
| `toggleBoomerang() => void`              | Toggle between `bounce` and `normal`                                                                      |
| `toggleLooping() => void`                | Toggle looping                                                                                            |
| `togglePlay() => void`                   | Toggle play                                                                                               |

<ArgTypes of={LottiePlayerStories} />
